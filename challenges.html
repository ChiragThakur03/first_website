<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenges - Panchayati Raj Kharkhoda</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/basic-info.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="header-top">
            <a href="index.html" class="logo">
                <img src="logo-placeholder.png" alt="Panchayati Raj Logo" id="logo-img">
            </a>
            <div class="header-text">
                <h1 id="panchayat-title">Loading...</h1>
                <p class="subheading" id="panchayat-subtitle">Panchayati Raj Kharkhoda</p>
            </div>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="panchayats.html">Panchayats</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="info-container">
            <!-- Development Barriers Card -->
            <div class="info-card">
                <h3><i class="fas fa-ban"></i> Barriers to Development</h3>
                <div id="development-barriers">
                    <h4>Infrastructure Challenges</h4>
                    <ul id="infrastructure-barriers"></ul>
                    <h4>Administrative Challenges</h4>
                    <ul id="administrative-barriers"></ul>
                </div>
            </div>

            <!-- Citizen Complaints Card -->
            <div class="info-card">
                <h3><i class="fas fa-exclamation-circle"></i> Citizen Complaints</h3>
                <div id="citizen-complaints">
                    <h4>Common Issues</h4>
                    <ul id="common-complaints"></ul>
                    <h4>Resolution Status</h4>
                    <ul id="complaint-status"></ul>
                </div>
            </div>

            <!-- Resource Shortages Card -->
            <div class="info-card">
                <h3><i class="fas fa-battery-quarter"></i> Resource Shortages</h3>
                <div id="resource-shortages">
                    <h4>Financial Gaps</h4>
                    <ul id="financial-gaps"></ul>
                    <h4>Material Shortages</h4>
                    <ul id="material-shortages"></ul>
                    <h4>Human Resource Needs</h4>
                    <ul id="hr-needs"></ul>
                </div>
            </div>

            <!-- Action Plan Card -->
            <div class="info-card">
                <h3><i class="fas fa-clipboard-list"></i> Action Plan</h3>
                <div id="action-plan">
                    <h4>Short-term Solutions</h4>
                    <ul id="short-term-solutions"></ul>
                    <h4>Long-term Strategies</h4>
                    <ul id="long-term-strategies"></ul>
                </div>
            </div>
        </div>

        <!-- Image Carousel -->
        <div class="carousel">
            <div id="carousel-content"></div>
            <button class="prev"><i class="fas fa-chevron-left"></i></button>
            <button class="next"><i class="fas fa-chevron-right"></i></button>
        </div>
    </main>

    <script>
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        function loadPanchayatData() {
            const panchayatId = getUrlParameter('id');
            const panchayatName = decodeURIComponent(getUrlParameter('name') || '');
            
            if (!panchayatId) {
                alert('Panchayat ID not specified');
                return;
            }

            // Update page title and header
            document.title = `${panchayatName} - Challenges`;
            document.getElementById('panchayat-title').textContent = `${panchayatName} - Challenges`;
            document.getElementById('panchayat-subtitle').textContent = `Panchayati Raj Kharkhoda`;

            // Update infrastructure barriers
            const infrastructureBarriers = [
                'Limited road connectivity in remote areas',
                'Aging water supply infrastructure',
                'Inadequate drainage systems',
                'Limited public transport facilities',
                'Poor internet connectivity'
            ];
            document.getElementById('infrastructure-barriers').innerHTML = 
                infrastructureBarriers.map(barrier => `<li>${barrier}</li>`).join('');

            // Update administrative barriers
            const administrativeBarriers = [
                'Delayed project approvals',
                'Complex bureaucratic procedures',
                'Limited technical expertise',
                'Coordination issues with departments'
            ];
            document.getElementById('administrative-barriers').innerHTML = 
                administrativeBarriers.map(barrier => `<li>${barrier}</li>`).join('');

            // Update common complaints
            const commonComplaints = [
                'Water supply interruptions',
                'Poor road conditions',
                'Inadequate street lighting',
                'Garbage collection issues',
                'Drainage problems during monsoon'
            ];
            document.getElementById('common-complaints').innerHTML = 
                commonComplaints.map(complaint => `<li>${complaint}</li>`).join('');

            // Update complaint status
            const complaintStatus = [
                'Total Complaints: 150',
                'Resolved: 100',
                'In Progress: 35',
                'Pending: 15',
                'Average Resolution Time: 7 days'
            ];
            document.getElementById('complaint-status').innerHTML = 
                complaintStatus.map(status => `<li>${status}</li>`).join('');

            // Update financial gaps
            const financialGaps = [
                'Budget deficit for infrastructure',
                'Limited funds for maintenance',
                'Delayed grant disbursements',
                'Cost overruns in projects'
            ];
            document.getElementById('financial-gaps').innerHTML = 
                financialGaps.map(gap => `<li>${gap}</li>`).join('');

            // Update material shortages
            const materialShortages = [
                'Construction materials',
                'Water treatment chemicals',
                'Maintenance equipment',
                'Office supplies'
            ];
            document.getElementById('material-shortages').innerHTML = 
                materialShortages.map(shortage => `<li>${shortage}</li>`).join('');

            // Update HR needs
            const hrNeeds = [
                'Technical staff shortage',
                'Need for skilled workers',
                'Training requirements',
                'Administrative staff gaps'
            ];
            document.getElementById('hr-needs').innerHTML = 
                hrNeeds.map(need => `<li>${need}</li>`).join('');

            // Update short-term solutions
            const shortTermSolutions = [
                'Emergency repairs of critical infrastructure',
                'Temporary staff arrangements',
                'Priority-based resource allocation',
                'Quick-fix maintenance work'
            ];
            document.getElementById('short-term-solutions').innerHTML = 
                shortTermSolutions.map(solution => `<li>${solution}</li>`).join('');

            // Update long-term strategies
            const longTermStrategies = [
                'Infrastructure modernization plan',
                'Capacity building programs',
                'Resource optimization strategy',
                'Technology integration roadmap'
            ];
            document.getElementById('long-term-strategies').innerHTML = 
                longTermStrategies.map(strategy => `<li>${strategy}</li>`).join('');

            // Load carousel images
            const carouselContent = document.getElementById('carousel-content');
            carouselContent.innerHTML = `
                <div class="carousel-item active">
                    <img src="images/panchayats/challenges1.jpg" alt="${panchayatName} Challenges Image 1">
                </div>
                <div class="carousel-item">
                    <img src="images/panchayats/challenges2.jpg" alt="${panchayatName} Challenges Image 2">
                </div>
                <div class="carousel-item">
                    <img src="images/panchayats/challenges3.jpg" alt="${panchayatName} Challenges Image 3">
                </div>
            `;
        }

        function initCarousel() {
            const carousel = document.querySelector('.carousel');
            const items = carousel.querySelectorAll('.carousel-item');
            const prevBtn = carousel.querySelector('.prev');
            const nextBtn = carousel.querySelector('.next');
            let currentIndex = 0;

            function showSlide(index) {
                items.forEach(item => item.style.display = 'none');
                items[index].style.display = 'block';
            }

            function nextSlide() {
                currentIndex = (currentIndex + 1) % items.length;
                showSlide(currentIndex);
            }

            function prevSlide() {
                currentIndex = (currentIndex - 1 + items.length) % items.length;
                showSlide(currentIndex);
            }

            prevBtn.addEventListener('click', prevSlide);
            nextBtn.addEventListener('click', nextSlide);
            setInterval(nextSlide, 5000);
            showSlide(currentIndex);
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadPanchayatData();
            initCarousel();
        });
    </script>
</body>
</html>
